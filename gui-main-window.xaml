<Window x:Name="mainWindow" x:Class="WpfApp.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:WpfApp"
        mc:Ignorable="d"
        Title="yt-dlp-pwsh" Height="600" Width="800"
        FontSize="13" Background="#1E1E1E"
        WindowStartupLocation="CenterScreen">
    
    <!-- Keep existing Window.Resources section unchanged -->
    <Window.Resources>
        <!-- ... existing styles ... -->
    </Window.Resources>

    <Grid Margin="16">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="8"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        
        <!-- URL Display Section - Made more compact -->
        <GroupBox Header="Video URL" Grid.Row="0" Padding="4">
            <TextBox x:Name="txtVideoUrl" 
                     IsReadOnly="True"
                     TextWrapping="Wrap"
                     Height="24"
                     VerticalAlignment="Center"/>
        </GroupBox>

        <!-- Main Content Grid -->
        <Grid Grid.Row="2">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="200"/>
                <ColumnDefinition Width="16"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- Left Panel - Destinations -->
            <DockPanel Grid.Column="0">
                <TextBlock DockPanel.Dock="Top" Text="Destinations" FontWeight="Bold" Margin="0,0,0,4"/>
                <ListBox x:Name="destinationsListBox" 
                         BorderThickness="1"
                         FontSize="12"/>
            </DockPanel>

            <!-- Right Panel - Controls -->
            <Grid Grid.Column="2">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="16"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <!-- Left Side Controls -->
                <StackPanel Grid.Column="0">
                    <!-- Options Group -->
                    <GroupBox Header="Options" Padding="4">
                        <WrapPanel>
                            <CheckBox x:Name="cbCookies" Content="Cookies from browser" IsChecked="True" Margin="0,0,12,4"/>
                            <CheckBox x:Name="cbBestAudio" Content="Best audio only" Margin="0,0,12,4"/>
                            <CheckBox x:Name="cbImpersonateGeneric" Content="Impersonate" Margin="0,0,12,4"/>
                            <CheckBox x:Name="cbCustomRanges" Content="Custom ranges" Margin="0,0,12,4"/>
                            <CheckBox x:Name="cb720p" Content="720p" Margin="0,0,12,4"/>
                            <CheckBox x:Name="cb1080p" Content="1080p" Margin="0,0,12,4"/>
                        </WrapPanel>
                    </GroupBox>

                    <!-- Naming Section -->
                    <GroupBox Header="Naming" Padding="4">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            <StackPanel Grid.Column="0">
                                <CheckBox x:Name="Checkbox_CustomName" Content="Custom name"/>
                                <TextBox x:Name="Textbox_CustomName" Height="36"
                                         IsEnabled="{Binding IsChecked, ElementName=Checkbox_CustomName}"
                                         TextWrapping="Wrap"
                                         Margin="0,4"/>
                            </StackPanel>
                            <Button x:Name="BtnPaste" Content="📋" Grid.Column="1" Width="28" Height="28" 
                                    VerticalAlignment="Bottom" Margin="4,0,0,0"/>
                        </Grid>
                    </GroupBox>
                </StackPanel>

                <!-- Right Side Controls -->
                <StackPanel Grid.Column="2">
                    <!-- Ranges Group -->
                    <GroupBox Header="Time Ranges" IsEnabled="{Binding ElementName=cbCustomRanges, Path=IsChecked}" Padding="4">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>

                            <!-- Time Controls -->
                            <Grid Grid.Row="0" Margin="0,0,0,4">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>

                                <!-- Start Time -->
                                <Label Content="Start" Grid.Row="0" Grid.Column="0" Padding="0,5" VerticalAlignment="Center"/>
                                <StackPanel Grid.Row="0" Grid.Column="1" Orientation="Horizontal" HorizontalAlignment="Center">
                                    <TextBox x:Name="hourStart" Width="36" Text="00" TextAlignment="Center"/>
                                    <TextBlock Text=":" VerticalAlignment="Center" Margin="2,0"/>
                                    <TextBox x:Name="minuteStart" Width="36" Text="00" TextAlignment="Center"/>
                                    <TextBlock Text=":" VerticalAlignment="Center" Margin="2,0"/>
                                    <TextBox x:Name="secondStart" Width="36" Text="00" TextAlignment="Center"/>
                                </StackPanel>
                                <Button x:Name="BtnSetToZeroStart" Content="0" Grid.Row="0" Grid.Column="2" Width="28"/>

                                <!-- End Time -->
                                <Label Content="End" Grid.Row="1" Grid.Column="0" Padding="0,5" VerticalAlignment="Center"/>
                                <StackPanel Grid.Row="1" Grid.Column="1" Orientation="Horizontal" HorizontalAlignment="Center">
                                    <TextBox x:Name="hourEnd" Width="36" Text="00" TextAlignment="Center"/>
                                    <TextBlock Text=":" VerticalAlignment="Center" Margin="2,0"/>
                                    <TextBox x:Name="minuteEnd" Width="36" Text="00" TextAlignment="Center"/>
                                    <TextBlock Text=":" VerticalAlignment="Center" Margin="2,0"/>
                                    <TextBox x:Name="secondEnd" Width="36" Text="00" TextAlignment="Center"/>
                                </StackPanel>
                                <Button x:Name="BtnSetToZeroEnd" Content="0" Grid.Row="1" Grid.Column="2" Width="28"/>
                            </Grid>

                            <!-- Range Controls -->
                            <Grid Grid.Row="1">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <ListBox x:Name="listboxRanges" Height="80" Grid.Column="0"/>
                                <StackPanel Grid.Column="1" Margin="4,0,0,0">
                                    <Button x:Name="buttonAddRange" Content="Add" Margin="0,0,0,4"/>
                                    <Button x:Name="buttonRemoveRange" Content="Remove" Margin="0,0,0,4"/>
                                    <Button x:Name="btn_range_loadFromFile" Content="Load"/>
                                </StackPanel>
                            </Grid>
                        </Grid>
                    </GroupBox>

                    <!-- Action Buttons -->
                    <UniformGrid Rows="1" Margin="0,8,0,0">
                        <Button x:Name="buttonRefreshDestinations" Content="Refresh" Margin="0,0,4,0"/>
                        <Button x:Name="proceedButton" Content="PROCEED" 
                                FontWeight="Bold" 
                                Background="#2E7D32"
                                Margin="4,0"/>
                        <Button x:Name="buttonExit" Content="EXIT" 
                                Background="#C62828"
                                Margin="4,0,0,0"/>
                    </UniformGrid>
                </StackPanel>
            </Grid>
        </Grid>
    </Grid>
</Window>